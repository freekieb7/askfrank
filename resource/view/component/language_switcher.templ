package component

import (
	"askfrank/internal/middleware"
	"github.com/gofiber/fiber/v2"
)

templ LanguageSwitcher(c *fiber.Ctx) {
	@LanguageSwitcherWithPath(c, c.Path())
}

templ LanguageSwitcherWithPath(c *fiber.Ctx, path string) {
	<div class="relative">
		<button onclick="toggleLanguageDropdown()" class="flex items-center space-x-1 text-[#464646] hover:text-[#02C39A] focus:outline-none px-2 py-1.5">
			if middleware.GetLang(c) == "nl" {
				<span class="text-xs font-medium">ğŸ‡³ğŸ‡± NL</span>
			} else {
				<span class="text-xs font-medium">ğŸ‡¬ğŸ‡§ EN</span>
			}
			<i class="fas fa-chevron-down text-xs"></i>
		</button>
		<div id="language-dropdown" class="absolute right-0 mt-1 w-28 rounded-lg shadow-lg py-1 opacity-0 pointer-events-none transition-all duration-200 z-50 border border-[#eaeaea] bg-white">
			<a href="/lang/en" class="block px-3 py-1.5 text-xs hover:bg-[#EAF2EF] text-[#464646] flex items-center space-x-1.5">
				<span>ğŸ‡¬ğŸ‡§</span>
				<span>English</span>
			</a>
			<a href="/lang/nl" class="block px-3 py-1.5 text-xs hover:bg-[#EAF2EF] text-[#464646] flex items-center space-x-1.5">
				<span>ğŸ‡³ğŸ‡±</span>
				<span>Nederlands</span>
			</a>
		</div>
	</div>
}
